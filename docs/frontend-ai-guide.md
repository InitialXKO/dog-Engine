# 前端AI使用指南

## 🎯 什么是前端直调AI？

这是一个创新的解决方案，让用户可以：
- ✅ 使用自己的Gemini API密钥
- ✅ 通过自己的网络环境访问AI
- ✅ 无需服务器配置和代理
- ✅ API密钥安全保存在本地浏览器

## 🚀 快速开始（3步骤）

### 第一步：获取API密钥

1. 访问 [Google AI Studio](https://aistudio.google.com/app/apikey)
2. 使用Google账号登录
3. 点击 **"Get API Key"** 或 **"Create API Key"**
4. 选择创建新项目或使用现有项目
5. 复制生成的API密钥

**注意事项：**
- 完全免费，无需信用卡
- 每分钟15次请求，每天1500次请求
- 密钥格式类似：`AIzaSyA...`

### 第二步：配置密钥

在应用中配置API密钥有两种方式：

#### 方式1：通过AI设置按钮（推荐）

1. 打开应用，进入写作页面
2. 点击右上角的 **"AI设置"** 按钮（齿轮图标）
3. 在弹出对话框中输入您的API密钥
4. 点击 **"测试连接"** 验证密钥是否有效
5. 点击 **"保存"** 完成配置

#### 方式2：在章节拆解中配置

1. 在书城找到一本书
2. 点击 **"拆解细纲"** 按钮
3. 在对话框右上角找到 **"AI设置"** 
4. 按照上述步骤配置

### 第三步：开始使用

配置完成后，您可以：
- ✍️ 使用AI写作助手续写章节
- 📖 拆解书城章节学习写作技巧
- 🎨 自定义AI角色和参数

## 📋 功能详解

### 1. AI写作助手（Editor）

**位置：** 写作页面 → 右下角浮动按钮

**功能：**
- 智能续写和改写
- 角色扮演创作
- 多章节上下文理解
- 角色卡片和世界设定集成

**使用步骤：**
1. 在写作区输入或编辑内容
2. 点击右下角的 ✨ 按钮打开AI助手
3. 输入指令（如"继续写下去"）
4. 可选：设置AI角色、选择上下文章节
5. 点击 **"生成"** 等待AI创作

**高级设置：**
- **语言模型**：选择不同的Gemini模型
  - `gemini-2.5-flash`：速度快，适合日常创作
  - `gemini-2.5-pro`：质量高，适合精细打磨
- **温度**：控制创意程度（0-1）
  - 低值（0.3）：稳定、可预测
  - 高值（0.9）：创意、多样化
- **最长输出**：控制生成内容长度（256-8192 tokens）

### 2. 章节拆解（DeconstructOutline）

**位置：** 书城 → 书籍详情 → 右上角编辑图标

**功能：**
- 分析网络小说章节
- 提取写作细纲
- 学习写作技巧
- 一键应用到创作中

**使用步骤：**
1. 在书城找到想学习的书籍
2. 点击书籍封面右上角的 📝 按钮
3. 选择要分析的章节
4. 选择AI模型
5. 点击 **"生成细纲"** 
6. 查看AI分析结果
7. 点击 **"应用到编辑器"** 使用细纲

**分析内容包括：**
- 主要情节发展
- 关键人物动作和对话
- 场景描写要点
- 情绪氛围营造
- 冲突和转折点

### 3. AI设置管理

**位置：** 多个入口点（写作页面、拆解对话框）

**功能：**
- 配置API密钥
- 测试连接状态
- 查看配置状态
- 清除密钥

**界面说明：**
- ⚙️ 齿轮图标 = 未配置密钥
- 🤖 绿色机器人图标 = 已配置密钥
- ✓ 绿色提示 = 使用您的API密钥
- ⚠ 橙色提示 = 需要配置密钥

## 🔒 安全和隐私

### API密钥存储

- **位置**：浏览器的 `localStorage`
- **范围**：仅当前域名可访问
- **传输**：不上传到服务器
- **使用**：仅在前端直接调用Google API

### 最佳实践

1. **不要分享密钥**：API密钥是个人的，不要公开或分享
2. **定期轮换**：建议定期在Google AI Studio重新生成密钥
3. **监控使用**：在Google AI Studio查看API使用情况
4. **清除密钥**：使用公共电脑时记得清除密钥

## ⚡ 性能优化

### 提高响应速度

1. **选择合适的模型**
   - 日常写作：使用 `gemini-2.5-flash`
   - 重要内容：使用 `gemini-2.5-pro`

2. **控制输入长度**
   - 避免发送过长的上下文
   - 只选择相关的章节作为上下文

3. **合理设置参数**
   - 不需要很长输出时，降低最长输出设置
   - 温度设置适中（0.7左右）

### 节省API配额

1. **精准指令**：清晰的指令可以一次生成满意内容
2. **复用内容**：善用编辑器的撤销/重做功能
3. **批量创作**：规划好内容再调用AI

## ❓ 常见问题

### Q1: API密钥无效怎么办？

**可能原因：**
1. 密钥输入错误（多余空格、缺少字符）
2. 密钥已被撤销
3. Google AI Studio项目未启用

**解决方法：**
1. 重新复制密钥，确保完整
2. 在Google AI Studio检查密钥状态
3. 尝试重新生成密钥

### Q2: 生成内容时出错？

**可能原因：**
1. 网络连接问题
2. API配额用完
3. 输入内容包含敏感信息

**解决方法：**
1. 检查网络连接
2. 在Google AI Studio查看配额使用情况
3. 修改输入内容，避免敏感词汇

### Q3: 国内能正常使用吗？

**答案：取决于您的网络环境**

- ✅ 如果您能访问Google服务，就能使用AI功能
- ✅ 前端直调使用您自己的网络环境
- ✅ VPN用户可以正常使用

**注意：**
- 服务器在国内时，只影响服务器端功能
- 前端AI功能完全不受服务器位置影响

### Q4: 如何清除密钥？

1. 打开 **"AI设置"** 对话框
2. 点击 **"清除"** 按钮
3. 确认清除

或者手动清除：
```javascript
localStorage.removeItem('gemini-api-key')
```

### Q5: 可以使用多个密钥吗？

目前版本：
- ❌ 不支持多密钥切换
- ✅ 可以随时更换密钥
- ✅ 保存新密钥会覆盖旧密钥

### Q6: API调用收费吗？

Gemini API免费额度：
- ✅ 每分钟：15次请求
- ✅ 每天：1500次请求
- ✅ 个人使用完全够用

超出免费额度：
- 需要升级到付费计划
- 在Google AI Studio查看定价

## 🔧 故障排除

### 问题：点击生成后无响应

**检查清单：**
- [ ] 是否已配置API密钥？
- [ ] 网络连接是否正常？
- [ ] 浏览器控制台是否有错误？
- [ ] 是否达到API配额限制？

**解决步骤：**
1. 打开浏览器控制台（F12）
2. 查看Console标签的错误信息
3. 测试API密钥连接
4. 检查网络请求状态

### 问题：生成内容质量不佳

**优化建议：**
1. **改进指令**：更具体、清晰的描述
2. **调整温度**：降低温度提高稳定性
3. **选择更强模型**：从Flash切换到Pro
4. **提供更多上下文**：选择相关章节

### 问题：浏览器兼容性

**支持的浏览器：**
- ✅ Chrome/Edge（推荐）
- ✅ Firefox
- ✅ Safari
- ⚠️ IE不支持

**最低版本要求：**
- Chrome 90+
- Firefox 88+
- Safari 14+

## 📚 进阶技巧

### 1. 有效的AI指令

**好的指令示例：**
```
继续写，主角发现了秘密通道，描写探险过程，
要有悬念和紧张感，大约500字。
```

**避免的指令：**
```
写
继续
好
```

### 2. 角色设定技巧

在AI角色输入框中：
```
你是一个专业的仙侠小说作家，擅长描写修仙者之间的
战斗场面，文笔华丽但不冗长，善于营造紧张刺激的氛围。
```

### 3. 上下文选择策略

选择上下文章节时：
- ✅ 选择前一章（保持连贯性）
- ✅ 选择关键转折章节（理解剧情）
- ❌ 避免选择太多章节（影响性能）

## 🎓 学习资源

- [Gemini API文档](https://ai.google.dev/docs)
- [提示词工程指南](https://ai.google.dev/docs/prompt_best_practices)
- [Google AI Studio](https://aistudio.google.com)

## 💬 反馈和支持

如有问题或建议：
1. 查看本文档的常见问题部分
2. 检查浏览器控制台的错误信息
3. 在GitHub Issues提交问题

---

**祝您写作愉快！** ✍️✨

